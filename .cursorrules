# Chatooly Development Rules - ALWAYS FOLLOW THESE

## CRITICAL: After EVERY change, verify these rules are followed:

### 1. EXPORT CONTAINER RULE (MOST IMPORTANT)
- ALL visual content MUST be inside `<div id="chatooly-canvas">` 
- NEVER create visual elements outside this container
- NEVER rename or remove the #chatooly-canvas ID

### 2. CDN SCRIPT RULE
- NEVER modify or remove: `<script src="https://yaelren.github.io/chatooly-cdn/js/core.js"></script>`
- This script handles all export and publishing functionality

### 3. EXPORT BUTTON RULE
- NEVER create your own export button
- The Chatooly CDN automatically adds the export button
- Button position is controlled by `buttonPosition` in chatooly-config.js

### 4. CANVAS SIZE RULE
- Visual area must be at least 800x600px
- Ensure responsive design works on mobile

### 5. FILE EDITING RULES
You CAN edit:
- index.html (add controls and content INSIDE #chatooly-canvas)
- styles.css (only sections marked "EDIT THIS SECTION")
- js/main.js (all tool logic)
- js/chatooly-config.js (tool metadata)

You CANNOT edit:
- The CDN script tag
- The base layout structure
- Core CSS layout styles
- The #chatooly-canvas container ID

### 6. LIBRARY INTEGRATION RULES
When using external libraries:

For p5.js:
```javascript
function setup() {
    let canvas = createCanvas(800, 600);
    canvas.parent('chatooly-canvas'); // CRITICAL: Attach to export container
}
```

For Three.js:
```javascript
const renderer = new THREE.WebGLRenderer();
renderer.setSize(800, 600);
document.getElementById('chatooly-canvas').appendChild(renderer.domElement);
```

For regular canvas:
```javascript
const canvas = document.createElement('canvas');
canvas.width = 800;
canvas.height = 600;
document.getElementById('chatooly-canvas').appendChild(canvas);
```

### 7. VERIFICATION CHECKLIST
After EVERY code change, verify:
✓ All visual content is inside #chatooly-canvas
✓ CDN script is intact and loading
✓ Export button appears in correct position
✓ Tool exports properly when button is clicked
✓ No JavaScript errors in console
✓ Tool works on mobile devices

### 8. TESTING COMMAND
Always test with: `npm run dev` and check http://localhost:8000

### 9. COMMON MISTAKES TO AVOID
❌ Creating visual elements outside #chatooly-canvas
❌ Adding custom export buttons
❌ Modifying the CDN script
❌ Changing the #chatooly-canvas ID
❌ Forgetting to attach canvases to the export container

## REMINDER: Read START_HERE.md for full implementation details