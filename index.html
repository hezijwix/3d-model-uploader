<!DOCTYPE html>
<!--
    Chatooly Tool Template
    Author: Yael Renous - Studio Video

    🤖 AI AGENTS: Before modifying this file, ALWAYS check:
    - https://raw.githubusercontent.com/yaelren/chatooly-cdn/main/css/variables.css
    - https://raw.githubusercontent.com/yaelren/chatooly-cdn/main/css/components.css
    - https://raw.githubusercontent.com/yaelren/chatooly-cdn/main/css/base.css
    - Ensure CDN script tag remains: https://yaelren.github.io/chatooly-cdn/js/core.min.js

    📁 FILE STRUCTURE:
    - js/main.js: Canvas/tool logic and rendering
    - js/ui.js: UI controls, collapsible sections, form interactions
    - js/chatooly-config.js: Tool configuration and metadata
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- ========== EDIT THIS: Your Tool Name ========== -->
    <title>3D Model Uploader - Chatooly</title>
    
    <!-- ========== DO NOT EDIT: Required CDN Styles ========== -->
    <link rel="stylesheet" href="https://yaelren.github.io/chatooly-cdn/css/unified.min.css">
    
    <!-- Three.js Library and Loaders (r162+ for environment rotation support) -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.162.0/build/three.module.js",
                "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.162.0/examples/jsm/"
            }
        }
    </script>
    <script type="module">
        import * as THREE from 'three';
        import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
        import { FBXLoader } from 'three/addons/loaders/FBXLoader.js';
        import { RGBELoader } from 'three/addons/loaders/RGBELoader.js';
        
        // Expose THREE and loaders globally for main.js
        window.THREE = THREE;
        window.GLTFLoader = GLTFLoader;
        window.FBXLoader = FBXLoader;
        window.RGBELoader = RGBELoader;
    </script>
</head>
<body>
    <!-- ========== EDIT THIS: Update header title to match your tool ========== -->
    <header class="chatooly-header">
        <div class="chatooly-header-title">3D Model Uploader</div>
        <div class="chatooly-header-credit">MADE WITH CHATOOLY</div>
    </header>

    <div class="chatooly-app-container">
        <!-- Left Panel: Tool Controls -->
        <div class="chatooly-controls-panel">
            <!-- ========== EDIT THIS: Tool Description ========== -->
            <div class="chatooly-controls-header">
                <p>Upload 3D models (GLB, GLTF, FBX) and create stunning renders with IBL lighting and turntable animations</p>
            </div>
            
            <div class="chatooly-controls-content">
                <!-- ========== CANVAS CONTROLS AUTO-INJECTED BY CDN ========== -->
                <!-- The Chatooly CDN automatically injects canvas controls here when it detects chatooly-canvas -->

                <!-- ========== EDIT BELOW: Add Your Custom Tool Controls Here ========== -->

                <!-- Model Upload Section -->
                <h3 class="section-header" id="model-header">
                    ◼ Model Upload <span class="section-toggle">▼</span>
                </h3>
                <div id="model-section" class="section-content">
                    <div class="chatooly-control-group">
                        <label for="model-upload">Upload 3D Model</label>
                        <input type="file" id="model-upload" accept=".glb,.gltf,.fbx">
                        <p class="chatooly-text-small chatooly-text-muted">Supports: GLB, GLTF, FBX</p>
                    </div>
                </div>

                <!-- Transform Controls Section -->
                <h3 class="section-header" id="transform-header">
                    ◼ Transform <span class="section-toggle">▼</span>
                </h3>
                <div id="transform-section" class="section-content">
                    <div class="chatooly-control-group">
                        <label for="scale-slider">Scale: <span id="scale-value">1.0</span></label>
                        <input type="range" id="scale-slider" min="0.1" max="5" step="0.1" value="1">
                    </div>

                    <div class="chatooly-control-group">
                        <label for="position-x">Position X: <span id="position-x-value">0</span></label>
                        <input type="range" id="position-x" min="-5" max="5" step="0.1" value="0">
                    </div>

                    <div class="chatooly-control-group">
                        <label for="position-y">Position Y: <span id="position-y-value">0</span></label>
                        <input type="range" id="position-y" min="-5" max="5" step="0.1" value="0">
                    </div>

                    <div class="chatooly-control-group">
                        <label for="rotation-x">Rotation X: <span id="rotation-x-value">0°</span></label>
                        <input type="range" id="rotation-x" min="0" max="360" step="1" value="0">
                    </div>

                    <div class="chatooly-control-group">
                        <label for="rotation-y">Rotation Y: <span id="rotation-y-value">0°</span></label>
                        <input type="range" id="rotation-y" min="0" max="360" step="1" value="0">
                    </div>

                    <div class="chatooly-control-group">
                        <label for="rotation-z">Rotation Z: <span id="rotation-z-value">0°</span></label>
                        <input type="range" id="rotation-z" min="0" max="360" step="1" value="0">
                    </div>
                </div>

                <!-- HDRI Lighting Section -->
                <h3 class="section-header" id="hdri-header">
                    ◼ HDRI Lighting <span class="section-toggle">▼</span>
                </h3>
                <div id="hdri-section" class="section-content">
                    <div class="chatooly-control-group">
                        <label for="hdri-preset">HDRI Environment (2K Quality)</label>
                        <select id="hdri-preset">
                            <option value="studio">Studio Loft Hall</option>
                            <option value="sunset">Venice Sunset</option>
                            <option value="outdoor">Outdoor Cloudy</option>
                            <option value="warehouse">Industrial Sunset</option>
                            <option value="night">Moonlit Golf</option>
                            <option value="autumn">Autumn Crossing</option>
                            <option value="urban">Urban Alley</option>
                        </select>
                    </div>

                    <div class="chatooly-control-group">
                        <label>
                            <input type="checkbox" id="hdri-background-visible"> Show HDRI Background
                        </label>
                        <p class="chatooly-text-small chatooly-text-muted">Display HDRI as background (lighting always active)</p>
                    </div>

                    <div class="chatooly-control-group">
                        <label for="hdri-intensity">Intensity: <span id="hdri-intensity-value">1.0</span></label>
                        <input type="range" id="hdri-intensity" min="0" max="3" step="0.1" value="1">
                    </div>

                    <div class="chatooly-control-group">
                        <label for="hdri-rotation">Rotation: <span id="hdri-rotation-value">0°</span></label>
                        <input type="range" id="hdri-rotation" min="0" max="360" step="1" value="0">
                    </div>

                    <hr class="chatooly-divider">

                    <!-- Sun Light Controls (HDRI + Sun Rig) -->
                    <div class="chatooly-control-group">
                        <label>
                            <input type="checkbox" id="sun-enabled" checked> Enable Sun Light
                        </label>
                        <p class="chatooly-text-small chatooly-text-muted">Directional light from HDRI brightest point (C4D/Redshift style)</p>
                    </div>

                    <div class="chatooly-control-group">
                        <label for="sun-intensity">Sun Intensity: <span id="sun-intensity-value">2.0</span></label>
                        <input type="range" id="sun-intensity" min="0" max="5" step="0.1" value="2">
                    </div>

                    <div class="chatooly-control-group">
                        <label for="shadow-quality">Shadow Quality</label>
                        <select id="shadow-quality">
                            <option value="1024">Low (1024x1024)</option>
                            <option value="2048" selected>Medium (2048x2048)</option>
                            <option value="4096">High (4096x4096)</option>
                        </select>
                        <p class="chatooly-text-small chatooly-text-muted">Higher quality = sharper shadows, more GPU memory</p>
                    </div>
                </div>

                <!-- Animation Section -->
                <h3 class="section-header" id="animation-header">
                    ◼ Animation <span class="section-toggle">▼</span>
                </h3>
                <div id="animation-section" class="section-content">
                    <div class="chatooly-control-group">
                        <label>
                            <input type="checkbox" id="turntable-toggle"> Enable Turntable
                        </label>
                    </div>

                    <div class="chatooly-control-group">
                        <label for="turntable-speed">Speed: <span id="turntable-speed-value">1.0</span></label>
                        <input type="range" id="turntable-speed" min="0.1" max="3" step="0.1" value="1">
                    </div>
                </div>

                <!-- ========== BACKGROUND CONTROLS ========== -->
                <h3 class="section-header" id="background-header">
                    ◼ Background <span class="section-toggle">▼</span>
                </h3>
                <div id="background-section" class="section-content">
                    <!-- Transparent Background Checkbox -->
                    <div class="chatooly-control-group">
                        <label>
                            <input type="checkbox" id="transparent-bg"> Transparent Background
                        </label>
                    </div>

                    <!-- Background Color Picker -->
                    <div class="chatooly-control-group" id="bg-color-group">
                        <label for="bg-color">Background Color</label>
                        <input type="color" id="bg-color" value="#CCFD50">
                    </div>

                    <!-- Background Image Upload with Remove Button (X) -->
                    <div class="chatooly-control-group">
                        <label for="bg-image">Background Image</label>
                        <div class="chatooly-bg-image-wrapper">
                            <input type="file" id="bg-image" accept="image/*">
                            <button id="clear-bg-image" type="button" class="chatooly-bg-image-remove" style="display: none;" title="Remove image">×</button>
                        </div>
                    </div>

                    <!-- Image Fit Dropdown (hidden until image uploaded) -->
                    <div class="chatooly-control-group" id="bg-fit-group" style="display: none;">
                        <label for="bg-fit">Image Fit</label>
                        <select id="bg-fit">
                            <option value="cover">Fill Frame</option>
                            <option value="contain">Fit in Frame</option>
                            <option value="fill">Stretch to Fill</option>
                        </select>
                    </div>
                </div>
                <!-- ========== END BACKGROUND CONTROLS ========== -->

                <!-- ========== END EDIT SECTION ========== -->
            </div>
        </div>
        
        <!-- Right Panel: Preview/Canvas Area -->
        <div class="chatooly-preview-panel">
            <!-- ========== DO NOT EDIT: Required Export Container ========== -->
            <div id="chatooly-container">
                <!-- ========== EDIT BELOW: Add Your Visual Output Here ========== -->
                <!-- This content will be exported as PNG/Video -->
                <!-- IMPORTANT: Your main canvas MUST have id="chatooly-canvas" -->
                <!-- For animations: CDN automatically detects canvas animations and provides video export options -->
                <canvas id="chatooly-canvas"></canvas>
                <!-- ========== END EDIT SECTION ========== -->
            </div>
        </div>
    </div>
    
    <!-- ========== DO NOT EDIT: Chatooly CDN v2.0 Integration ========== -->
    <!-- This script automatically provides: Dark theme styling + Static/Video export functionality -->
    <!-- Video support: Detects p5.js, Three.js, Canvas animations and provides MediaRecorder API export -->
    <script src="https://yaelren.github.io/chatooly-cdn/js/core.min.js"></script>
    
    <!-- ========== DO NOT EDIT: Chatooly Configuration ========== -->
    <script src="js/chatooly-config.js"></script>

    <!-- ========== DO NOT EDIT: UI Controls ========== -->
    <script src="js/ui.js"></script>

    <!-- ========== DO NOT EDIT: Your Tool Logic ========== -->
    <script src="js/main.js"></script>
</body>
</html>